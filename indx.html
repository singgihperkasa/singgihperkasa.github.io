    prevBtn.disabled = currentSurahNumber === 1;
    nextBtn.disabled = currentSurahNumber === 114;

    try {
      const res = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/id.indonesian`); // ✅ tanpa spasi
      const data = await res.json();
      currentSurahData = data.data;
      renderSurah();
    } catch (err) {
      console.error('Gagal memuat surah:', err);
      document.getElementById('quran-content').innerHTML = '<p style="text-align:center;color:red;">Gagal memuat surah. Coba lagi nanti.</p>';
    }
  }

  function renderSurah() {
    const container = document.getElementById('quran-content');
    container.innerHTML = '';

    currentSurahData.ayahs.forEach(ayah => {
      const verseDiv = document.createElement('div');
      verseDiv.className = 'verse';

      const verseNumber = document.createElement('span');
      verseNumber.className = 'verse-number';
      verseNumber.textContent = ayah.numberInSurah;
      verseNumber.onclick = () => {
        playAudio(ayah.number);
        updateBookmarkButton(currentSurahNumber, ayah.numberInSurah);
      };

      const verseText = document.createElement('div');
      verseText.className = 'verse-text';
      verseText.textContent = ayah.text;

      const translation = document.createElement('div');
      translation.className = 'translation';
      translation.textContent = ayah.edition.text;

      verseDiv.appendChild(verseNumber);
      verseDiv.appendChild(verseText);
      verseDiv.appendChild(translation);
      container.appendChild(verseDiv);
    });

    audioQueue = currentSurahData.ayahs.map(ayah => ayah.number);
  }

  function playAudio(ayahNumber) {
    const audioPlayer = document.getElementById('audio-player');
    // ✅ Sesuaikan nama folder qori dengan yang ada di EveryAyah
    const audioUrl = `https://everyayah.com/data/${currentQori}/${String(ayahNumber).padStart(3, '0')}.mp3`;
    audioPlayer.src = audioUrl;
    audioPlayer.play().catch(e => console.warn("Gagal memutar audio:", e));
  }

  document.getElementById('play-all').addEventListener('click', () => {
    currentAyahIndex = 0;
    playNextAudio();
  });

  function playNextAudio() {
    if (currentAyahIndex >= audioQueue.length) return;

    const ayahNumber = audioQueue[currentAyahIndex];
    const audioPlayer = document.getElementById('audio-player');
    const audioUrl = `https://everyayah.com/data/${currentQori}/${String(ayahNumber).padStart(3, '0')}.mp3`; // ✅ tanpa spasi

    audioPlayer.src = audioUrl;
    audioPlayer.onended = () => {
      currentAyahIndex++;
      playNextAudio();
    };
    audioPlayer.play().catch(e => {
      console.warn("Gagal memutar audio:", e);
      currentAyahIndex++;
      playNextAudio();
    });
  }

  surahSelect.addEventListener('change', (e) => {
    loadSurah(e.target.value);
  });

  // Inisialisasi
  loadSurahList();
</script>
